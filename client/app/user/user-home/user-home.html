<div class="br-mainpanel user-home medium-bg">
  <div class="br-pagetitle">
    <section class="welcome">
      <div class="row">
        <div class="col-lg welcome-message">
          <h2>
            {{vm.greeting }},
            <span>
              {{ vm.principal.first_name }}
              {{ vm.principal.last_name }} !
            </span>
          </h2>
          <p class="mg-b-0 mg-t-10">
            <div ng-if="vm.homeless">
              <p class="tx-15">
                Thanks for signing up! Looks like you haven't requested access to a Fire Department yet.<br />
                <a href="#" ui-sref="site.user.requestAccess" class="btn btn-primary hvr-float mg-t-10">Request Now</a>
                <br>
              </p>
            </div>
            <div ng-if="vm.pending">
              <p class="tx-15">
                Thanks for signing up!
                <br>
                Your're pending approval from
                <strong>{{vm.requestedFireDepartment.name }}</strong>.
                <br>
                Please follow up with your local adminstrator to receive approval.
              </p>
            </div>
            <div ng-if="vm.setupComplete">
            </div>
          </p>
        </div>
        <div class="col-lg actions mg-t-5" ng-if="vm.appAccess">
          <a href="" ng-click="vm.dashboard()">
            <img src="/assets/images/actions-dashboard.svg"/>
            <span>Dashboard</span>
          </a>
          <a ng-if="!vm.appConfig.on_premise" href="" ng-click="vm.goto('site.twitter.home','Twitter')">
            <img src="/assets/images/actions-twitter.svg"/>
            <span>Twitter</span>
          </a>
          <!--<a href="" ng-if="vm.principal.isAdmin" ng-click="vm.goto('site.nfpa.home','NFPA')" > <img src="/assets/images/actions-big-board.svg"/> <span>NFPA Compliance</span> </a>-->
          <!--<a ng-if="!vm.appConfig.on_premise" href="" ng-click="vm.goto('site.report.today','Reporting')">
            <img src="/assets/images/actions-reporting.svg"/>
            <span>Reporting</span>
          </a>-->
          <a href="" ng-click="vm.goto('site.incident.search','Incident Analysis')">
            <img src="/assets/images/actions-incident-analysis.svg"/>
            <span>Incident Analysis</span>
          </a>
        </div>
      </div>
    </section>
  </div>
  <div class="br-pagebody">
    <section class="overview">
      <div class="row">
        <div class="col-lg-7 weather-conditions">
          <div class="card h-100">
            <div class="card-header bg-white bd-0 d-flex align-items-center justify-content-between">
              <h2 class="card-title tx-medium mg-b-0 tx-spacing-1">Today's Outlook</h2>
              <div class="card-option">
                <h3 class="heavyheader"> <shift-text firecares_id="{{vm.fireDepartment.firecares_id}}" timezone="{{vm.fireDepartment.timezone}}"> </shift-text></h3>
              </div><!-- card-option -->
            </div><!-- card-header -->
            <div class="card-body h-100">
              Based on historical data, we are estimating a  <span class="busy">BUSY</span>day 

              <br>
              <div class="row">
                <div class="col-md-6">
                  <h4 class="heavyheader"> Weather </h4>
                  <div ng-if="vm.weatherForecast">
                    <current-weather weather="vm.weatherForecast.currently"></current-weather>
                  </div>
                 <div ng-if="!vm.weatherForecast">
                    <i class="fa fa-bar-chart tx-80 tx-gray-300 mg-b-20"></i>
                    <br>
                    No weather data available at this time.
                  </div>
                </div>
                <div class="col-md-6">
                  <h4 class="heavyheader"> Safety Tip of the Day </h4>
                  <p class="tx-light">{{vm.safetyMessage.message}}</p>
                </div>
              </div>
              <div class="row mt-4">
                <div class="col-12">
                  <incident-map incidents="vm.activeIncidents"></incident-map>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5">
          <div class="card h-100">
            <div class="card-header bg-white bd-0 d-flex align-items-center justify-content-between">
                <h2 class="card-title tx-medium mg-b-0 tx-spacing-1">Yesterday's Recap</h2>
              <div class="card-option">
                <h3 class="heavyheader"> <shift-text firecares_id="{{vm.fireDepartment.firecares_id}}" timezone="{{vm.fireDepartment.timezone}}" days_ago=1> </shift-text></h3>
              </div><!-- card-option -->
            </div><!-- card-header -->
            <div class="card-body h-100">
              <h4 class="heavyheader">Top Incidents</h4>
              <div class="row">
                <div class="col-6">
                  <h5 class="text-center tx-medium">FIRE</h5>
                  <ul class="list-group">
                    <li ng-repeat="incident in vm.interestingIncidents.FIRE" class="list-group-item">
                      <p class="mg-b-0">
                        <nfpa-analysis analysis="incident.analysis"></nfpa-analysis>
                        <strong class="tx-inverse" tx-medium><a href="#" ui-sref="site.incident.analysis({ id: incident.incident_number })">{{incident.incident_number}}</a></strong>
                        <span class="tx-muted">{{ incident.type }}</span>
                      </p>
                    </li>
                  </ul>
                </div>
                <div class="col-6">
                  <h5 class="text-center tx-medium">EMS</h5>
                  <ul class="list-group">
                      <li ng-repeat="incident in vm.interestingIncidents.EMS" class="list-group-item">
                        <p class="mg-b-0">
                          <nfpa-analysis analysis="incident.analysis"></nfpa-analysis>
                          <strong class="tx-inverse" tx-medium><a href="#" ui-sref="site.incident.analysis({ id: incident.incident_number })">{{incident.incident_number}}</a></strong>
                          <span class="tx-muted">{{ incident.type }}</span>
                        </p>
                      </li>
                    </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
