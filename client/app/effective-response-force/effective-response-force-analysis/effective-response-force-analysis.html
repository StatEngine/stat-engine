<div class="incident-search">
  <div class="br-pageheader">
    <nav class="breadcrumb">
      <a class="breadcrumb-item" href="index.html">Home</a>
      <a class="breadcrumb-item" href="#">ERF</a>
    </nav>
  </div><!-- br-pageheader -->
  <div class="br-pagetitle d-flex justify-content-between flex-wrap">
    <h2 class="m-0">ERF</h2>
  </div><!-- br-pagetitle -->
  <div class="br-pagebody">
    <div class="data-spy" data-spy="scroll" data-target="#navbar-example">
      <!-- Overview -->
      <section class="overview" id="overview">
        <!-- Overview Intro -->
        <div class="overview-intro card">
          <div class="card-body">
            <div class="overview-intro-summary">
              <h5 class="heavyheader"> Overview </h5>
              <p>An <strong>effective response force (ERF)</strong> is defined as the minimum number of firefighters and
                equipment that must reach a specific emergency incident location within a maximum prescribed travel
                [driving] time. ERF is also referred to as concentration, or first alarm arrival.

                <br>
                <br>
                This simplified model only computes ERF based on the number of personnel arriving, and doesn't include the capabilities of the personnel or equipement (e.g. ALS, 1500 GPM pump, etc).
                <br>
                <br>

                <h6>Definitions</h6>
                <strong>ERF Travel - </strong>The time duration between the first apparatus enroute and arrival of the last apparatus to achieve ERF.</strong>
                <br><strong>ERF Response - </strong>The time duration between first apparatus dispatched and arrival of the last apparatus to achieve ERF (includes turnout).</strong>
                <br><strong>ERF Total Response - </strong>The time duration between PSAP answer time and arrival of the last apparatus to achieve ERF (includes call answering and turnout).</strong>
              </p>
            </div>
          </div>
        </div>

        <div class="overview-intro card mt-4">
          <div class="card-body">
              <h5 class="heavyheader"> Historic ERF Analysis </h5>
            <div class="alert alert-primary" role="alert">
              <h5 class="heavyheader">How it works</h5>
              This tool is used to expore trends of possible ERF values based on your historic call volume.
              The tool will find the most recent 10,000 incidents for the given incident type, and calculate the arrival times of personnel.
              The gray highlighted area in the background shows your currently configured ERF for the given incident type.

              <br>
              <br>
              <strong>To try out the tool, simply select a dispatch type and explore the results</strong>

              <br>
              <br>
              <h5 class="heavyheader">Something doesn't look right?</h5>
              <ul class="statengine">
                <li>The tool requires both ERF and personnel configuration.  If you have not configured this during onboarding, please reach out to  <a href="mailto:analytics-help@nfors.org" target="_blank">analytics-help@nfors.org</a>for assistance.
                </li>
                <li>The tool currently includes ALL calls, which may impact your trend if your dataset has significant
                    outliers.
                </li>
                <li>
                  The tool ignores apparatus arrivals for responses in which any of the timestamps are detected as timestamp abnormalities.  Timestamp abnormalites occur when one timestamp is missing or appears out of order.  For example, if an apparatus singals arrival before signalling enroute.
                </li>
                </li>
              </ul>
            </div>

            <strong> Dispatch Type: </strong>
            <select ng-model="vm.selectedType" ng-options="x for x in vm.formData.uniqueTypes" ng-change="vm.loadERF()">
            </select>
            <div ng-if="vm.erfAnalysis.current_config">
              <h2 class="text-center heavyheader">{{ vm.selectedType }} ({{ vm.erfAnalysis.current_config.response_class }} - {{ vm.erfAnalysis.current_config.risk_category }})</h2>

            </div>
            <effective-response-force
              data="vm.erfAnalysis"
              type="{{vm.selectedType}}">
            </effective-response-force>
            <br>
          </div>
        </div>
      </div>
      </section>
    </div>
  </div>
</div>