<div class="br-mainpanel medium-bg">

  <reporting-unit-list
    units="vm.unitStore.allUnits"
    on-select="vm.selectUnit(selected)">
  </reporting-unit-list>

  <div class="reporting-unit-body">
    <div class="br-pageheader">
      <nav class="breadcrumb pd-0 mg-0 tx-12">
        <a class="breadcrumb-item" href="index.html">Home</a>
        <a class="breadcrumb-item" href="#">Reports</a>
        <a class="breadcrumb-item" href="#">Units</a>
        <span class="breadcrumb-item active">{{ vm.selected.id }}</span>
      </nav>
      &nbsp;&nbsp;<select ng-options="tf as tf.displayName for tf in vm.timeFilters" ng-model="vm.e" class="form-control-sm">
      </select>
    </div><!-- br-pageheader -->

    <div class="br-pagetitle bg-white d-flex justify-content-between flex-wrap">
      <h2 class="m-0">{{ vm.selected.id }} </h2>
    </div>
    <div class="ht-md-60 pb-3 pb-md-0 pd pd-x-25 bd-b d-flex align-items-center justify-content-start bg-white">
      <ul class="nav nav-outline active-info align-items-start flex-column flex-md-row" role="tablist">
        <li class="nav-item tx-medium pl-0"><a class="nav-link active" data-toggle="tab" href="#overview" role="tab">Overview</a></li>
        <li class="nav-item tx-medium"><a class="nav-link" data-toggle="tab" href="#" role="tab" ng-click="vm.scrollTo('#location')">Turnout</a></li>
        <li class="nav-item tx-medium"><a class="nav-link" data-toggle="tab" href="#" role="tab" ng-click="vm.scrollTo('#situationalAwareness')">Travel</a></li>
        <li class="nav-item tx-medium"><a class="nav-link" data-toggle="tab" href="#" role="tab" ng-click="vm.scrollTo('#response')">Details</a></li>
      </ul>
    </div>

    <div class="br-pagebody">
      <!-- incident types -->
      <h4 class="br-section-label">Overview</h4>
      <div class="row">
        <div class="col-12">
          <div class="row no-gutters tx-center">
            <div class="col-6 col-sm-6 pd-y-20">
              <p class="tx-12 mg-b-0">Incidents</p>
              <div class="row">
                <div class="col-6">
                  <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.total_data.total_count }}</h5>
                  <percent-change
                    old-value="vm.currentMetrics.total_data.total_count"
                    new-value="vm.previousMetrics.total_data.total_count">
                  </percent-change>
                </div>
                <div class="col-6">
                  All time <br>
                  Min: {{ vm.totalIncidentMin.total_count }} <br>
                  Max: {{ vm.totalIncidentMax.total_count }} <br>
                  Avg: {{ vm.totalIncidentAvg }} <br>
                  Today: {{ vm.currentMetrics.total_data.total_count }} <br>
                </div>
              </div>
            </div>
            <div class="col-6 col-sm-6 pd-y-20 bd-l bd-color-gray-lighter">
              <p class="tx-12 mg-b-0">Commit Time</p>
              <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.humanizeDuration(vm.currentMetrics.total_data.total_commitment_time_seconds*1000) }}</h5>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <incident-category-chart
          data="vm.currentMetrics.time_series_data.grouped_data.category">
        </incident-category-chart>
      </div>

      <div id="accordion" class="accordion" role="tablist" aria-multiselectable="true">
        <div class="card">
          <div class="card-header" role="tab" id="headingOne">
            <h6 class="mg-b-0">
              <a data-toggle="collapse" data-parent="#accordion" href="#turnoutTime" aria-expanded="true" aria-controls="turnoutTime" class="tx-gray-800 transition">
                Turnout Time
              </a>
            </h6>
          </div><!-- card-header -->
          <div id="turnoutTime" class="collapse show" role="tabpanel" aria-labelledby="turnoutTime">
            <div class="card-block pd-20">
              <div class="row">
                <div class="col-6">
                  <strong>Summary</strong>
                  <div class="row no-gutters tx-center">
                    <div class="col-4 col-sm-4 pd-y-20">
                      <p class="tx-12 mg-b-0">Total</p>
                      <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.total_data['90_percentile_turnout_duration_seconds'] | number: 0 }}</h5>
                    </div>
                    <div class="col-4 col-sm-4 pd-y-20 bd-l bd-color-gray-lighter">
                      <p class="tx-12 mg-b-0">EMS</p>
                      <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.grouped_data.category.EMS['90_percentile_turnout_duration_seconds'] | number: 0 }}</h5>
                    </div>
                    <div class="col-4 col-sm-4 pd-y-20 bd-l bd-color-gray-lighter">
                      <p class="tx-12 mg-b-0">FIRE</p>
                      <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.grouped_data.category.FIRE['90_percentile_turnout_duration_seconds'] | number: 0 }}</h5>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <strong>Insights</strong>
                </div>
              </div>

              <div class="row">

              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header" role="tab">
            <h6 class="mg-b-0">
              <a data-toggle="collapse" data-parent="#accordion" href="#travelTime" aria-expanded="true" aria-controls="travelTime" class="tx-gray-800 transition">
                Travel Time
              </a>
            </h6>
          </div><!-- card-header -->

          <div id="travelTime" class="collapse show" role="tabpanel" aria-labelledby="travelTime">
            <div class="card-block pd-20">
              <div class="row">
                <div class="col-6">
                  <strong>Summary</strong>
                  <div class="row no-gutters tx-center">
                    <div class="col-4 col-sm-4 pd-y-20">
                      <p class="tx-12 mg-b-0">Total</p>
                      <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.total_data['90_percentile_travel_duration_seconds'] | number: 0 }}</h5>
                    </div>
                    <div class="col-4 col-sm-4 pd-y-20 bd-l bd-color-gray-lighter">
                      <p class="tx-12 mg-b-0">EMS</p>
                      <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.grouped_data.category.EMS['90_percentile_travel_duration_seconds'] | number: 0 }}</h5>
                    </div>
                    <div class="col-4 col-sm-4 pd-y-20 bd-l bd-color-gray-lighter">
                      <p class="tx-12 mg-b-0">FIRE</p>
                      <h5 class="tx-inverse tx-lato tx-bold mg-b-5">{{ vm.currentMetrics.grouped_data.category.FIRE['90_percentile_travel_duration_seconds'] | number: 0 }}</h5>
                    </div>
                  </div>
                </div>

                <div class="col-6">
                  <strong>Insights</strong>
                </div>
              </div>

              <div class="row">

              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header" role="tab">
            <h6 class="mg-b-0">
              <a data-toggle="collapse" data-parent="#accordion" href="#incidentDetails" aria-expanded="true" aria-controls="incidentDetails" class="tx-gray-800 transition">
                Incident Details
              </a>
            </h6>
          </div><!-- card-header -->

          <div id="incidentDetails" class="collapse show" role="tabpanel" aria-labelledby="incidentDetails">
            <div class="card-block pd-20">
              <div ui-grid="vm.responsesTableOptions" class="search-grid">

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
